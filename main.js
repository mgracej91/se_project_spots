!function(){"use strict";var e="",t=e+"ad8dae02f0c7eb97bc8d.svg",o=e+"2fc47fd8e9a9bcd9612f.jpg",r=e+"d38272e02bb4f1ab1c37.svg",n=e+"40608da7369d39bc1077.svg";const l={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",modalButtonSelector:".modal__close-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_error_type",errorClass:"modal__error_visible"},a=(e,t,o)=>{const r=t.id+"-error",n=e.querySelector("#"+r);n.textContent="",t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass)},c=e=>e.some((e=>!e.validity.valid)),i=(e,t,o)=>{console.log(c(e)),c(e)?s(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},s=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)};document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".header__logo"),l=document.querySelector(".profile__avatar"),a=document.querySelector(".profile__edit-button img"),c=document.querySelector(".profile__newpost-button img");e.src=t,l.src=o,a.src=r,c.src=n}));const d=document.querySelector(".profile__edit-button"),u=document.querySelector("#edit-modal"),m=u.querySelector(".modal__form"),f=u.querySelector(".modal__close-button"),p=document.querySelector(".profile__title"),_=u.querySelector("#profile-title-input"),y=document.querySelector(".profile__description"),b=u.querySelector("#profile-description-input"),v=document.querySelector("#card-template"),S=document.querySelector(".cards__list"),x=document.querySelector("#post-modal"),q=document.querySelector(".profile__newpost-button"),h=x.querySelector(".modal__close-button"),w=x.querySelector(".modal__form"),g=x.querySelector(".modal__save-button"),k=x.querySelector("#post-link-input"),L=x.querySelector("#post-caption-input"),D=document.querySelector("#preview-modal"),E=D.querySelector(".modal__image"),M=D.querySelector(".modal__caption"),A=D.querySelector(".modal__close-button_type_preview"),B=document.querySelectorAll(".modal");function C(e){e.classList.add("modal_opened"),document.addEventListener("keydown",V)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",V)}function G(e){const t=v.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),r=t.querySelector(".card__title"),n=t.querySelector(".card__like-button"),l=t.querySelector(".card__delete-button");return o.src=e.link,o.alt=e.name,r.textContent=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-button_liked")})),l.addEventListener("click",(()=>{l.closest(".card").remove()})),o.addEventListener("click",(()=>{C(D),E.src=e.link,E.alt=e.name,M.textContent=e.name})),t}m.addEventListener("submit",(function(e){e.preventDefault(),p.textContent=_.value,y.textContent=b.value,H(u)})),d.addEventListener("click",(()=>{!function(e,t){const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);o.forEach((o=>{a(e,o,t)})),i(o,r,t)}(m,l),_.value=p.textContent,b.value=y.textContent,C(u)})),f.addEventListener("click",(()=>{H(u)}));const j=e=>{e.target.classList.contains("modal")&&e.target.classList.remove("modal_opened")};function V(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&H(e)}}var W;B.forEach((e=>{e.addEventListener("click",j)})),q.addEventListener("click",(()=>{C(x)})),A.addEventListener("click",(()=>{H(D)})),h.addEventListener("click",(()=>{H(x)})),w.addEventListener("submit",(function(e){e.preventDefault();const t=G({name:L.value,link:k.value});S.prepend(t),w.reset(),s(g,l),H(x)})),[{name:"Golden Gate bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Sunflower Field",link:"https://images.unsplash.com/photo-1536633125620-8a3245c11ffa?w=120&dpr=2&h=200&auto=format&fit=crop&q=60&ixid=M3wxMjA3fDB8MXxzZWFyY2h8NHx8c3VuZmxvd2VyJTIwZmllbGR8ZW58MHx8fHwxNzQzMTE0OTQ5fDA&ixlib=rb-4.0.3"},{name:"Cocnut tree near the sea",link:"https://images.unsplash.com/photo-1513907404652-d138942b8859?q=80&w=1587&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Water stream through the mountains",link:"https://images.unsplash.com/photo-1610997186335-12de8a2dc7fd?q=80&w=1642&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Northern Lights in snowy Alaska",link:"https://images.unsplash.com/photo-1531366936337-7c912a4589a7?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Green Valley Mountains",link:"https://images.unsplash.com/photo-1617634667039-8e4cb277ab46?q=80&w=1568&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Gondola through the city of venice",link:"https://images.unsplash.com/photo-1514890547357-a9ee288728e0?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}].forEach((e=>{const t=G(e);S.prepend(t)})),W=l,document.querySelectorAll(W.formSelector).forEach((e=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);i(o,r,t),o.forEach((n=>{n.addEventListener("input",(()=>{((e,t,o)=>{t.validity.valid?a(e,t,o):((e,t,o,r)=>{const n=t.id+"-error";e.querySelector("#"+n).textContent=o,t.classList.add(r.inputErrorClass)})(e,t,t.validationMessage,o)})(e,n,t),i(o,r,t)}))}))})(e,W)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTaEYsSUEvQkswRixFQUFDMUYsRUFBYUUsS0FDckMsTUFBTVMsRUFBWW1FLE1BQU1DLEtBQ3RCL0UsRUFBWXVELGlCQUFpQnJELEVBQU9ULGdCQUVoQ3VCLEVBQWdCaEIsRUFBWU0sY0FBY0osRUFBT1Isc0JBRXZEcUIsRUFBa0JKLEVBQVdLLEVBQWVkLEdBRTVDUyxFQUFVcUUsU0FBUy9FLElBQ2pCQSxFQUFhc0IsaUJBQWlCLFNBQVMsS0EzQ2hCb0UsRUFBQzNGLEVBQWFDLEVBQWNDLEtBQ2hERCxFQUFhWSxTQUFTQyxNQVF6QmYsRUFBZUMsRUFBYUMsRUFBY0MsR0F4QnZCMEYsRUFBQzVGLEVBQWFDLEVBQWM0RixFQUFjM0YsS0FDL0QsTUFBTUMsRUFBYUYsRUFBYUcsR0FBSyxTQUNiSixFQUFZTSxjQUFjLElBQU1ILEdBQ3hDSSxZQUFjc0YsRUFDOUI1RixFQUFhTyxVQUFVYSxJQUFJbkIsRUFBT0wsZ0JBQWdCLEVBYWhEK0YsQ0FDRTVGLEVBQ0FDLEVBQ0FBLEVBQWE2RixrQkFDYjVGLEVBSUosRUFrQ0l5RixDQUFtQjNGLEVBQWFDLEVBQWNDLEdBQzlDYSxFQUFrQkosRUFBV0ssRUFBZWQsRUFBTyxHQUNuRCxHQUNGLEVBbUJBd0YsQ0FBaUIxRixFQUFhRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcbiAgbW9kYWxCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X2Vycm9yX3R5cGVcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJZCA9IGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCI7XG4gIGNvbnN0IGVycm9yTXNnRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvck1zZ0lkKTtcbiAgZXJyb3JNc2dFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0lkID0gaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIjtcbiAgY29uc3QgZXJyb3JNc2dFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIGVycm9yTXNnSWQpO1xuICBlcnJvck1zZ0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JNc2dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zb2xlLmxvZyhoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSk7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVkQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlZEJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVyID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRWYWxpZGF0aW9uKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9KTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG59XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcihmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBMb2dvIGZyb20gXCIuLi9pbWFnZXMvTG9nby5zdmdcIjtcbmltcG9ydCBhdmF0YXIgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5pbXBvcnQgcGVuY2lsIGZyb20gXCIuLi9pbWFnZXMvcGVuY2lsLnN2Z1wiO1xuaW1wb3J0IHBsdXMgZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xuXG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICByZXNldFZhbGlkYXRpb24sXG4gIHNldHRpbmdzLFxuICBkaXNhYmxlZEJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIGNvbnN0IGhlYWRlckxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbG9nb1wiKTtcbiAgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuICBjb25zdCBlZGl0QnV0dG9uSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uIGltZ1wiKTtcbiAgY29uc3QgbmV3UG9zdEJ1dHRvbkltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIi5wcm9maWxlX19uZXdwb3N0LWJ1dHRvbiBpbWdcIlxuICApO1xuXG4gIGhlYWRlckxvZ28uc3JjID0gTG9nbztcbiAgcHJvZmlsZUF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIGVkaXRCdXR0b25JbWFnZS5zcmMgPSBwZW5jaWw7XG4gIG5ld1Bvc3RCdXR0b25JbWFnZS5zcmMgPSBwbHVzO1xufSk7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgYnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTdW5mbG93ZXIgRmllbGRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTM2NjMzMTI1NjIwLThhMzI0NWMxMWZmYT93PTEyMCZkcHI9MiZoPTIwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4aWQ9TTN3eE1qQTNmREI4TVh4elpXRnlZMmg4Tkh4OGMzVnVabXh2ZDJWeUpUSXdabWxsYkdSOFpXNThNSHg4Zkh3eE56UXpNVEUwT1RRNWZEQSZpeGxpYj1yYi00LjAuM1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDb2NudXQgdHJlZSBuZWFyIHRoZSBzZWFcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTEzOTA3NDA0NjUyLWQxMzg5NDJiODg1OT9xPTgwJnc9MTU4NyZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiV2F0ZXIgc3RyZWFtIHRocm91Z2ggdGhlIG1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTA5OTcxODYzMzUtMTJkZThhMmRjN2ZkP3E9ODAmdz0xNjQyJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJOb3J0aGVybiBMaWdodHMgaW4gc25vd3kgQWxhc2thXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzMTM2NjkzNjMzNy03YzkxMmE0NTg5YTc/cT04MCZ3PTE0NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdyZWVuIFZhbGxleSBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjE3NjM0NjY3MDM5LThlNGNiMjc3YWI0Nj9xPTgwJnc9MTU2OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR29uZG9sYSB0aHJvdWdoIHRoZSBjaXR5IG9mIHZlbmljZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTQ4OTA1NDczNTctYTllZTI4ODcyOGUwP3E9ODAmdz0xNDcwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuXTtcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5cbmNvbnN0IGVkaXRNb2RhbEZvcm0gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuXG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuXG5jb25zdCBlZGl0TW9kYWxUaXRsZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcblxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcblxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuY29uc3QgcG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0LW1vZGFsXCIpO1xuXG5jb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXdwb3N0LWJ1dHRvblwiKTtcblxuY29uc3QgcG9zdE1vZGFsQ2xvc2VCdXR0b24gPSBwb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuXG5jb25zdCBwb3N0TW9kYWxGb3JtID0gcG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5cbmNvbnN0IHBvc3RTdWJtaXRCdXR0b24gPSBwb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7XG5cbmNvbnN0IHBvc3RMaW5rSW5wdXQgPSBwb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwb3N0LWxpbmstaW5wdXRcIik7XG5cbmNvbnN0IHBvc3RDYXB0aW9uSW5wdXQgPSBwb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwb3N0LWNhcHRpb24taW5wdXRcIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcblxuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcblxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IG1vZGFsQ2xvc2VQcmV2aWV3ID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9wcmV2aWV3XCJcbik7XG5cbmNvbnN0IG1vZGFsQ2xvc2VPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0Nsb3NlKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NDbG9zZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRNb2RhbEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBlZGl0TW9kYWxUaXRsZUlucHV0LnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZE5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcmRUb0RlbGV0ZSA9IGNhcmREZWxldGVCdXR0b24uY2xvc2VzdChcIi5jYXJkXCIpO1xuICAgIGNhcmRUb0RlbGV0ZS5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUG9zdFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGlucHV0VmFsdWVzID0ge1xuICAgIG5hbWU6IHBvc3RDYXB0aW9uSW5wdXQudmFsdWUsXG4gICAgbGluazogcG9zdExpbmtJbnB1dC52YWx1ZSxcbiAgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgcG9zdE1vZGFsRm9ybS5yZXNldCgpO1xuICBkaXNhYmxlZEJ1dHRvbihwb3N0U3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwocG9zdE1vZGFsKTtcbn1cblxuZWRpdE1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRNb2RhbEZvcm1TdWJtaXQpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldFZhbGlkYXRpb24oZWRpdE1vZGFsRm9ybSwgc2V0dGluZ3MpO1xuICBlZGl0TW9kYWxUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuXG5lZGl0TW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxuY29uc3QgaGFuZGxlQ2xvc2VNb2RhbCA9IChldnQpID0+IHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIH1cbn07XG5cbm1vZGFsQ2xvc2VPdmVybGF5LmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbG9zZU1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIGlmIChvcGVuZWRNb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuZWRNb2RhbCk7XG4gICAgfVxuICB9XG59XG5cbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKHBvc3RNb2RhbCk7XG59KTtcblxubW9kYWxDbG9zZVByZXZpZXcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbnBvc3RNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwocG9zdE1vZGFsKTtcbn0pO1xuXG5wb3N0TW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUG9zdFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJtb2RhbEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwiZXJyb3JNc2dJZCIsImlkIiwiZXJyb3JNc2dFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImJ1dHRvbkVsZW1lbnQiLCJjb25zb2xlIiwibG9nIiwiZGlzYWJsZWRCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhlYWRlckxvZ28iLCJwcm9maWxlQXZhdGFyIiwiZWRpdEJ1dHRvbkltYWdlIiwibmV3UG9zdEJ1dHRvbkltYWdlIiwic3JjIiwiTG9nbyIsImF2YXRhciIsInBlbmNpbCIsInBsdXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImVkaXRNb2RhbCIsImVkaXRNb2RhbEZvcm0iLCJlZGl0TW9kYWxDbG9zZUJ1dHRvbiIsInByb2ZpbGVUaXRsZSIsImVkaXRNb2RhbFRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0IiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwicG9zdE1vZGFsIiwibmV3UG9zdEJ1dHRvbiIsInBvc3RNb2RhbENsb3NlQnV0dG9uIiwicG9zdE1vZGFsRm9ybSIsInBvc3RTdWJtaXRCdXR0b24iLCJwb3N0TGlua0lucHV0IiwicG9zdENhcHRpb25JbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlRWwiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWwiLCJtb2RhbENsb3NlUHJldmlldyIsIm1vZGFsQ2xvc2VPdmVybGF5IiwicXVlcnlTZWxlY3RvckFsbCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVsIiwiY2FyZE5hbWVFbCIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImxpbmsiLCJhbHQiLCJuYW1lIiwidG9nZ2xlIiwiY2xvc2VzdCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwiaGFuZGxlQ2xvc2VNb2RhbCIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5Iiwib3BlbmVkTW9kYWwiLCJwcmVwZW5kIiwicmVzZXQiLCJjYXJkIiwic2V0RXZlbnRMaXN0ZW5lciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9